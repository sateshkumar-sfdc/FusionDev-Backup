<apex:page showHeader="true" sidebar="true" standardController="zkfedex__Shipment__c" extensions="zkfedex.PrintLabelv3Controller" docType="html-5.0" action="{! init }" tabStyle="zkfedex__Shipment__c">
<apex:form >
	<apex:sectionHeader title="Shipment" subtitle="Printing" help="http://www.zenkraft.com/support/ups/docs/managing-shipments"/>
	<apex:commandLink action="{!backToPreviousPage}" value="Back to Previous Page"/>

	<apex:pageBlock mode="detail">

		<apex:pageBlockButtons >
			<apex:outputPanel id="printPageBlockButtons" rendered="{!AND(NOT(SingleLabel), enablePrinting)}">
				<apex:commandButton value="Print All" action="{! doPrintAllLabels }"/>
			</apex:outputPanel>
		</apex:pageBlockButtons>

		<apex:outputPanel id="printMessages">
			<apex:pageMessages id="messages" />
		</apex:outputPanel>

		<!-- Labels section -->
		<apex:outputPanel id="labelTable">
			<apex:pageBlockSection collapsible="false" title="Labels" columns="1">
					<apex:pageBlockTable value="{! printLabels }" var="printLabel" cellpadding="10">
						<apex:column >
							<apex:facet name="header">File Name</apex:facet>
							<apex:outputText value="{!printLabel.Name}"/>
						</apex:column>					
						<apex:column >
							<apex:facet name="header">Printer</apex:facet>
							<apex:selectList value="{! printLabel.selectedPrinter }" size="1">
								<apex:selectOptions value="{! optionAllGlobalPrinterList }"/>
							</apex:selectList>
						</apex:column>
						<apex:column >
							<apex:facet name="header"></apex:facet>
							<apex:commandButton value="Print" rerender="printMessages" action="{! doPrintLabel }" rendered="{! enablePrinting }">
								<apex:param name="printeLabelId" value="{! printLabel.Id }" assignTo="{! selectedLabelId }"/>
							</apex:commandButton>
						</apex:column>
					</apex:pageBlockTable>
			</apex:pageBlockSection>

		</apex:outputPanel>

		<apex:outputPanel id="defaultPrinters">
			<apex:pageBlockSection collapsible="false" columns="1">
				<apex:commandButton value="Manage Default Printers" action="{! goToManagePrinters }"/>
			</apex:pageBlockSection>
		</apex:outputPanel>

	</apex:pageBlock>
</apex:form>
</apex:page>